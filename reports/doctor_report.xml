<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Doctor Profile Report Template -->
    <template id="report_doctor_profile">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="doctor">
                <t t-call="web.external_layout">
                    <div class="page">
                        <!-- Header -->
                        <div class="row" style="border-bottom: 2px solid #28a745; padding-bottom: 10px; margin-bottom: 20px;">
                            <div class="col-8">
                                <h2 style="color: #28a745;">
                                    <i class="fa fa-user-md"></i> Doctor Profile Report
                                </h2>
                            </div>
                            <div class="col-4 text-right">
                                <h3 style="color: #28a745;">
                                    Dr. <span t-field="doctor.name"/>
                                </h3>
                            </div>
                        </div>

                        <!-- Doctor Information -->
                        <div class="row mb-4">
                            <div class="col-12">
                                <div style="background-color: #f8f9fa; padding: 20px; border-radius: 5px;">
                                    <h4 style="color: #28a745; margin-bottom: 15px;">
                                        <i class="fa fa-id-card"></i> Professional Information
                                    </h4>
                                    <table class="table table-sm table-borderless">
                                        <tr>
                                            <td width="25%"><strong>Doctor Name:</strong></td>
                                            <td width="25%"><span t-field="doctor.name"/></td>
                                            <td width="25%"><strong>Specialty:</strong></td>
                                            <td width="25%">
                                                <span t-field="doctor.specialty" class="badge badge-success" style="font-size: 14px;"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td><strong>Phone:</strong></td>
                                            <td><span t-field="doctor.phone"/></td>
                                            <td><strong>Email:</strong></td>
                                            <td><span t-field="doctor.email"/></td>
                                        </tr>
                                        <tr>
                                            <td><strong>Consultation Fee:</strong></td>
                                            <td><span t-field="doctor.consultation_fee"/> EGP</td>
                                            <td><strong>Status:</strong></td>
                                            <td>
                                                <span t-if="doctor.active" class="badge badge-success">Active</span>
                                                <span t-else="" class="badge badge-secondary">Inactive</span>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <!-- Patient Statistics -->
                        <div class="row mb-4">
                            <div class="col-12">
                                <div style="background-color: #d4edda; padding: 20px; border-radius: 5px; border-left: 4px solid #28a745;">
                                    <h4 style="color: #155724; margin-bottom: 15px;">
                                        <i class="fa fa-chart-bar"></i> Patient Statistics
                                    </h4>
                                    <div class="row text-center">
                                        <div class="col-4">
                                            <div style="background-color: white; padding: 20px; border-radius: 5px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                                <h1 style="color: #28a745; margin: 0;"><span t-field="doctor.patient_count"/></h1>
                                                <p style="color: #6c757d; margin: 5px 0 0 0;">Total Patients</p>
                                            </div>
                                        </div>
                                        <div class="col-4">
                                            <div style="background-color: white; padding: 20px; border-radius: 5px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                                <h1 style="color: #17a2b8; margin: 0;"><span t-field="doctor.max_patients"/></h1>
                                                <p style="color: #6c757d; margin: 5px 0 0 0;">Max Capacity</p>
                                            </div>
                                        </div>
                                        <div class="col-4">
                                            <div style="background-color: white; padding: 20px; border-radius: 5px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                                <h1 t-if="doctor.availability == 'available'" style="color: #28a745; margin: 0;">
                                                    <i class="fa fa-check-circle"></i>
                                                </h1>
                                                <h1 t-elif="doctor.availability == 'busy'" style="color: #ffc107; margin: 0;">
                                                    <i class="fa fa-exclamation-circle"></i>
                                                </h1>
                                                <h1 t-else="" style="color: #dc3545; margin: 0;">
                                                    <i class="fa fa-times-circle"></i>
                                                </h1>
                                                <p style="color: #6c757d; margin: 5px 0 0 0;">
                                                    <span t-field="doctor.availability"/>
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Patient List -->
                        <div class="row mb-4" t-if="doctor.patient_ids">
                            <div class="col-12">
                                <h4 style="color: #28a745; margin-bottom: 15px;">
                                    <i class="fa fa-users"></i> Assigned Patients
                                </h4>
                                <table class="table table-sm table-bordered" style="font-size: 12px;">
                                    <thead style="background-color: #28a745; color: white;">
                                        <tr>
                                            <th>Reference</th>
                                            <th>Patient Name</th>
                                            <th>Age</th>
                                            <th>Gender</th>
                                            <th>Admission Date</th>
                                            <th>Status</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr t-foreach="doctor.patient_ids" t-as="patient">
                                            <td><span t-field="patient.reference"/></td>
                                            <td><strong><span t-field="patient.name"/></strong></td>
                                            <td>
                                                <span t-field="patient.age"/>
                                                <span t-if="patient.is_child" class="badge badge-warning ml-1">Child</span>
                                            </td>
                                            <td>
                                                <span t-if="patient.gender == 'male'" class="badge badge-primary">Male</span>
                                                <span t-elif="patient.gender == 'female'" class="badge badge-danger">Female</span>
                                                <span t-else="" class="badge badge-secondary">Other</span>
                                            </td>
                                            <td><span t-field="patient.admission_date"/></td>
                                            <td>
                                                <span t-if="patient.active" class="badge badge-success">Active</span>
                                                <span t-else="" class="badge badge-secondary">Inactive</span>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- No Patients Message -->
                        <div class="row mb-4" t-if="not doctor.patient_ids">
                            <div class="col-12">
                                <div class="alert alert-info text-center" role="alert">
                                    <i class="fa fa-info-circle"></i> No patients assigned to this doctor yet.
                                </div>
                            </div>
                        </div>

                        <!-- Footer -->
                        <div class="row mt-5">
                            <div class="col-12 text-center">
                                <p style="color: #6c757d; font-size: 12px; border-top: 1px solid #dee2e6; padding-top: 15px;">
                                    <i class="fa fa-print"></i> Generated on <span t-esc="context_timestamp(datetime.datetime.now()).strftime('%Y-%m-%d %H:%M:%S')"/>
                                    <br/>
                                    <strong>Hospital Management System</strong> - Doctor Profile Report
                                </p>
                            </div>
                        </div>
                    </div>
                </t>
            </t>
        </t>
    </template>
</odoo>